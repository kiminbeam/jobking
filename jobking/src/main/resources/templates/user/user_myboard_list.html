<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" type="text/css" href="/css/style.css">
<link rel="stylesheet" type="text/css" href="/css/user_myboard_list.css">
</head>

<body>
<header>
	<div th:replace="~{/fragments/nav.html :: fragment-nav}"></div>
</header>
<div th:include="~{/fragments/sidebar.html :: fragment-sidebar}"></div>
<main>
	<div id="managingCommuWrap">
		<h1>ë§ˆì´í˜ì´ì§€</h1>
		<h3>ì»¤ë®¤ë‹ˆí‹° í™œë™ ê´€ë¦¬</h3>
		
		<h3>ë‚´ê°€ ì“´ ê¸€ ë³´ê¸°</h3>
		<table class="userBoard">
			<tr>
				<th>ì»¤ë®¤ë‹ˆí‹° ê¸€ ì œëª©</th>
				<th>ìˆ˜ì •</th>
				<th>ì‚­ì œ</th>
			</tr>
			<tr th:each="userBoard : ${userBoardList}">
				<td>[[${userBoard.title}]]</td>
				<td class="editBtn">ğŸ“<span style="display:none;">[[${userBoard.ubno}]]</span></td>
				<td class="deleteBtn">âŒ<span style="display:none;">[[${userBoard.ubno}]]</span></td>
			</tr>
		</table>
		
		
		<h3>ë‚´ê°€ ì“´ ëŒ“ê¸€ ë³´ê¸°</h3>
		<table class="userReply">
			<tr>
				<th>ì»¤ë®¤ë‹ˆí‹° ê¸€ ì œëª©</th>
				<th>ëŒ“ê¸€ ë‚´ìš©</th>
				<th>ìˆ˜ì •</th>
				<th>ì‚­ì œ</th>
			</tr>
			<tr th:each="userReply : ${userReplyList}">
				<td>[[${userReply.userBoard.title}]]</td>
				<td>[[${userReply.content}]]</td>
				<td class="editBtn">ğŸ“<span style="display:none;">[[${userReply.replyno}]]</span></td>
				<td class="deleteBtn">âŒ<span style="display:none;">[[${userReply.replyno}]]</span></td>
			</tr>
		</table>
	</div>
</main>
	<footer>
		<div th:replace="~{/fragments/footer.html :: fragment-footer}"></div>
	</footer>
</body>



<script th:inline="javascript">
	const deleteBtns = document.querySelectorAll(".deleteBtn");
	const editBtns = document.querySelectorAll(".editBtn");
	deleteBtns.forEach(btn=>{
		btn.addEventListener("click", function(e){
			let table = e.target.parentElement.parentElement.parentElement.classList;
			let no = e.target.querySelector("span").innerText;
			
			if(table =="userBoard"){
				if(confirm("ì •ë§ë¡œ í•´ë‹¹ ê¸€ì„ ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){
					location.href="/user/delete_board?ubno="+no;
				};
			}else if(table =="userReply"){
				if(confirm("ì •ë§ë¡œ í•´ë‹¹ ëŒ“ê¸€ì„ ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){
					location.href="/user/delete_reply?replyno="+no;
				}
			}
		})
	})
	
	editBtns.forEach(btn=>{
		btn.addEventListener("click", function(e){
			let table = e.target.parentElement.parentElement.parentElement.classList;
			let no = e.target.querySelector("span").innerText;
			
			if(table =="userBoard"){
				location.href="/user/edit_board?ubno="+no;
			}else if(table =="userReply"){
				location.href="/user/edit_reply?replyno="+no;
			}
		})
	})

	
</script>
</html>